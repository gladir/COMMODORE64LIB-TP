{ @author: Sylvain Maltais (support@gladir.com)
  @created: 2023
  @website(https://www.gladir.com/CODER/COMMODORE64LIB-TP)
  @abstract(Target: Turbo Pascal 7)
}

Unit C64LIB;

INTERFACE

Const
 C64_PALETTE:Array[0..15]of LongInt=(
  $000000, { Noir }
  $FFFFFF, { Blanc }
  $8A323D, { Rouge }
  $67BFB3, { Cyan }
  $8D36A1, { Pourpe }
  $4BA648, { Vert }
  $322DAB, { Bleu }
  $CDD256, { Jaune }
  $8E501A, { Orange }
  $523D01, { Brun }
  $BC636E, { Rouge clair }
  $4E4E4E, { Gris fonc‚ }
  $767676, { Gris m‚dimum }
  $8EE98B, { Vert clair }
  $6B66E4, { Bleu clair }
  $A3A3A3  { Gris clair }
 );

 D6510=$0000;
 R6510=$0001;
 BLANK0=$0002;
 ADRAY1=$0003;
 ADRAY2=$0005;
 CHARAC=$0007;
 ENDCHR=$0008;
 TRMPOS=$0009;
 VERCK=$000A;
 COUNT=$000B;
 DIMFLG=$000C;
 VALTYP=$000D;
 INTFLG=$000E;
 GARBFL=$000F;
 SUBFLG=$0010;
 INPFLG=$0011;
 TANSGN=$0012;
 CHANNL=$0013;
 LINNUM=$0014;
 TEMPPT=$0016;
 LASTPT=$0017;
 TEMPST=$0019;
 INDEX=$0022;
 INDEX1=$0022;
 INDEX2=$0024;
 RESHO=$0026;
 TXTTAB=$002B;
 VARTAB=$002D;
 ARYTAB=$002F;
 STREND=$0031;
 FRETOP=$0033;
 FRESPC=$0035;
 MEMSIZ=$0037;
 CURLIN=$0039;
 OLDLIN=$003B;
 OLDTXT=$003D;
 DATLIN=$003F;
 DATPTR=$0041;
 INPPTR=$0043;
 VARNAM=$0045;
 VARPNT=$0047;
 FORPNT=$0049;
 OPPTR=$004B;
 VARTXT=$004B;
 OPMASK=$004D;
 DEFPNT=$004E;
 TEMPF3=$004E;
 DSCPNT=$0050;
 FOUR6=$0053;
 JMPER=$0054;
 TEMPF1=$0057;
 TEMPF2=$005C;
 FAC=$0061;
 FACEXP=$0061;
 FACHO=$0062;
 FACSGN=$0066;
 SGNFLG=$0067;
 BITS=$0068;
 ARGEXP=$0069;
 ARGHO=$006A;
 ARGSGN=$006E;
 ARISGN=$006F;
 FACOV=$0070;
 FBUFPT=$0071;
 CHRGET=$0073;
 CHRGOT=$0079;
 TXTPTR=$007A;
 RNDX=$008B;
 STATUS=$0090;
 STKEY=$0091;
 SVXT=$0092;
 VERCK_=$0093;
 C3P0=$0094;
 BSOUR=$0095;
 SYNO=$0096;
 XSAV=$0097;
 LDTND=$0098;
 DFLTN=$0099;
 DFLTO=$009A;
 PRTY=$009B;
 DPSW=$009C;
 MSGFLG=$009D;
 PTR1=$009E;
 PTR2=$009F;
 TIME=$00A0;
 PCNTR=$00A3;
 R2D2=$00A3;
 BSOUR1=$00A4;
 FIRT=$00A4;
 CNTDN=$00A5;
 BUFPT=$00A6;
 INBIT=$00A7;
 BITCI=$00A8;
 RINONE=$00A9;
 RIDATA=$00AA;
 RIPRTY=$00AB;
 SAL=$00AC;
 EAL=$00AE;
 CMP0=$00B0;
 TAPE1=$00B2;
 BITTS=$00B4;
 NXTBIT=$00B5;
 RODATA=$00B6;
 FNLEN=$00B7;
 LA=$00B8;
 SA=$00B9;
 FA=$00BA;
 FNADR=$00BB;
 ROPRTY=$00BD;
 FSBLK=$00BE;
 MYCH=$00BF;
 CAS1=$00C0;
 STAL=$00C1;
 MEMUSS=$00C3;
 LSTX=$00C5;
 NDX=$00C6;
 RVS=$00C7;
 INDX=$00C8;
 LSXP=$00C9;
 SFDX=$00CB;
 BLNSW=$00CC;
 BLNCT=$00CD;
 GDBLN=$00CE;
 BLNON=$00CF;
 CRSW=$00D0;
 PNT=$00D1;
 PNTR=$00D3;
 QTSW=$00D4;
 LNMX=$00D5;
 TBLX=$00D6;
 DATA=$00D7;
 INSRT=$00D8;
 LDTB1=$00D9;
 USER=$00F3;
 KEYTAB=$00F5;
 RIBUF=$00F7;
 ROBUF=$00F9;
 FREKZP=$00FB;
 BASZPT=$00FF;
 BAD=$0100;
 BUF=$0200;
 LAT=$0259;
 FAT=$0263;
 SAT=$026D;
 KEYD=$0277;
 MEMSTR=$0281;
 MEMSIZ_=$0283;
 TIMOUT=$0285;
 COLOR=$0286;
 GDCOL=$0287;
 HIBASE=$0288;
 XMAX=$0289;
 RPTFLG=$028A;
 KOUNT=$028B;
 DELAY=$028C;
 SHFLAG=$028D;
 LSTSHF=$028E;
 KEYLOG=$028F;
 MODE=$0291;
 AUTODN=$0292;
 M51CTR=$0293;
 M51CDR=$0294;
 M51AJB=$0295;
 RSSTAT=$0297;
 BITNUM=$0298;
 BAUDOF=$0299;
 RIDBE=$029B;
 RIDBS=$029C;
 RODBS=$029D;
 RODBE=$029E;
 IRQTMP=$029F;
 ENABL=$02A1;
 CASTON=$02A2;
 KIKA26=$02A3;
 STUPID=$02A4;
 LINTMP=$02A5;
 PALNTS=$02A6;
 IERROR=$0300;
 IMAIN=$0302;
 ICRNCH=$0304;
 IQPLOP=$0306;
 IGONE=$0308;
 IEVAL=$030A;
 SAREG=$030C;
 SXREG=$030D;
 SYREG=$030E;
 SPREG=$030F;
 USRPOK=$0310;
 USRADD=$0311;
 CINV=$0314;
 CBINV=$0316;
 NMINV=$0318;
 IOPEN=$031A;
 ICLOSE=$031C;
 ICHKIN=$031E;
 ICKOUT=$0320;
 ICLRCH=$0322;
 IBASIN=$0324;
 IBSOUT=$0326;
 ISTOP=$0328;
 IGETIN=$032A;
 ICLALL=$032C;
 USRCMD=$032E;
 ILOAD=$0330;
 ISAVE=$0332;
 TBUFFR=$033C;
 VICSCN=$0400;

Function  ColorDistance(r1,g1,b1,r2,g2,b2:Integer):Real;
Procedure SplitRGB(RGB:Integer;Var R,G,B:Byte);

IMPLEMENTATION

Procedure SplitRGB(RGB:Integer;Var R,G,B:Byte);Begin
 R:=(RGB shr 16) and $FF;
 G:=(RGB shr 8) and $FF;
 B:=RGB and $FF;
End;

Function ColorDistance(r1,g1,b1,r2,g2,b2:Integer):Real;
Var
 DiffRed,DiffGreen,DiffBlue:Real;
Begin
 DiffRed:=r2-r1;
 DiffGreen:=g2-g1;
 DiffBlue:=b2-b1;
 ColorDistance:=0.3*Sqr(DiffRed)+0.59*Sqr(DiffGreen)+0.11*Sqr(DiffBlue);
End;


END.